//
//  social.h
//  earthnews
//
//  Created by Ubaka Onyechi on 21/06/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

#ifndef EARTHNEWS_SOCIAL_H
#define EARTHNEWS_SOCIAL_H

#include "../engine/cx_system.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#define SOCIAL_TWITTER_API_SEARCH_RPP   (15)

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct social_twitter_tweet_item_t
{
  const char *username;
  const char *userhandle;
  const char *tweet;
  const char *date;
  struct social_twitter_tweet_item_t *next;
} social_twitter_tweet_item_t;

typedef struct social_twitter_tweets_t
{
  social_twitter_tweet_item_t *items;
  unsigned int maxId;
  time_t lastUpdateTime;
  bool dataReady;
} social_twitter_tweets_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef void (*social_twitter_api_search_callback) (social_twitter_tweets_t *tweets);
                                                   
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

bool social_twitter_init (void);
void social_twiiter_user_login (void);

void social_twitter_api_search (social_twitter_tweets_t *tweets, const char *query);
void social_twitter_release (social_twitter_tweets_t *tweets);

#if 0
void social_twitter_api_search (const char *query, social_twitter_api_search_callback fn, void *userdata);
void social_twitter_api_search2 (const char *query, float lat, float lon, float radiusKm);
#endif
void socail_twitter_update ();

bool social_twitter_search_parse (social_twitter_tweets_t *tweets, const char *data, int dataSize);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
