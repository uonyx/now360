//
//  earth.h
//  earthnews
//
//  Created by Ubaka Onyechi on 01/05/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef EARTHNEWS_CITIES_H
#define EARTHNEWS_CITIES_H

#include "../engine/cx_engine.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#define DEBUG_WEATHER_ID 1

struct earth_visual_t
{
  float radius;
  int slices;
  int parallels;
  
  cx_mesh *mesh [3];
  cx_texture *nightMap;
};

struct earth_data_t
{
  const char **names;
  const char **newsFeeds;
  
#if DEBUG_WEATHER_ID
  char *weatherId;
#else
  const char **weatherId;
#endif
  cx_vec4 *location;
  cx_vec4 *normal;
  int *utcOffset;
  int *dstOffset;
  const char **tznames;
  int count;
};

struct earth_t
{
  struct earth_data_t *data;
  struct earth_visual_t *visual;
};

typedef struct earth_t earth_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

earth_t *earth_create (const char *filename);
void earth_destroy (earth_t *earth);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

int earth_data_count (void);
const char *earth_data_weather (int index);
const char *earth_data_city (int index);
const char *earth_data_news_query (int index);
void earth_data_update_dst_offsets (earth_t *earth);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void earth_visual_render (const earth_t *earth, const cx_date *date, const cx_vec4 *eye);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
