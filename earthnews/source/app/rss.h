//
//  rss.h
//  earthnews
//
//  Created by Ubaka Onyechi on 02/07/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

#ifndef EARTHNEWS_RSS_H
#define EARTHNEWS_RSS_H

#include "../engine/cx_system.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct rss_feed_item_t
{
  const char *title;
  const char *link;
  const char *date;
  struct rss_feed_item_t *next;
} rss_feed_item_t;

typedef struct rss_feed_t
{
  rss_feed_item_t *items;
  unsigned int lastRefreshTime;
  
  bool dataReady;
} rss_feed_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void rss_get_feed (rss_feed_t *feed, const char *url);
void rss_release_feed (rss_feed_t *feed);

bool rss_parse_xml (rss_feed_t *feed, const char *data, int dataSize);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
