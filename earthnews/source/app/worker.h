//
//  worker.h
//  earthnews
//
//  Created by Ubaka Onyechi on 18/08/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

#ifndef NOW360_WORKER_H
#define NOW360_WORKER_H

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <stdbool.h>

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#define TASK_ID_INVALID (-1)

typedef int task_id;

typedef enum
{
  TASK_STATUS_INVALID,
  TASK_STATUS_INPROGRESS,
  TASK_STATUS_COMPLETE,
} task_status;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef void (*task_func)(void *userdata);
typedef void (*task_func_cleanup) (void *userdata);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void worker_init (void);
void worker_deinit (void);
void worker_update (void);

task_id worker_add_task (task_func func, void *userdata, task_status *status);
void worker_remove_task (task_id taskId);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
