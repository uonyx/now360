//
//  camera.h
//  earthnews
//
//  Created by Ubaka Onyechi on 02/03/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

#ifndef EARTHNEWS_CAMERA_H
#define EARTHNEWS_CAMERA_H

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "../engine/cx_utility.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

// column 1 - right
// column 2 - up
// column 3 - forward
// column 4 - position

struct camera_t
{
  cx_vec4 position;
  cx_vec4 target;
  cx_vec4 up;
  float fov; // degrees
  float aspectRatio;
};

typedef struct camera_t camera_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void camera_init (camera_t *camera, float aspectRatio, float fov);
void camera_look_at (camera_t *camera, const cx_vec4 *target);
void camera_update (camera_t *camera, float deltaTime);

void camera_zoom (camera_t *camera, float factor);
void camera_rotate_view (camera_t *camera, float angle, const cx_vec4 *axis);
void camera_rotate_around_point (camera_t *camera, const cx_vec4 * CX_RESTRICT point, float angle, const cx_vec4 * CX_RESTRICT axis);

void camera_get_view_matrix (camera_t *camera, cx_mat4x4 *matrix);
void camera_get_projection_matrix (camera_t *camera, cx_mat4x4 *matrix);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
