//
//  feeds.h
//  earthnews
//
//  Created by Ubaka Onyechi on 14/07/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

#ifndef EARTHNEWS_FEEDS_H
#define EARTHNEWS_FEEDS_H

#include <stdbool.h>
#include <time.h>

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct news_feed_item_t
{
  const char *title;
  const char *link;
  const char *date;
  struct news_feed_item_t *next;
} news_feed_item_t;

typedef struct news_feed_t
{
  news_feed_item_t *items;
  const char *link;
  time_t lastUpdate;
  bool dataPending;
  bool dataReady;
} news_feed_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct twitter_tweet_t
{
  const char *username;
  const char *userhandle;
  const char *text;
  const char *date;
  struct twitter_tweet_t *next;
} twitter_tweet_t;

typedef struct twitter_feed_t
{
  twitter_tweet_t *items;
  unsigned int maxId;
  
  time_t lastUpdate;
  bool dataPending;
  bool dataReady;
} twitter_feed_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct weather_feed_t
{
  const char *imageUrl;
  int celsius;
  
  time_t lastUpdate;
  bool dataPending;
  bool dataReady;
} weather_feed_t;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void feeds_news_search (news_feed_t *feed, const char *query);

bool feeds_news_parse (news_feed_t *feed, const char *data, int dataSize);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void feeds_twitter_search (twitter_feed_t *feed, const char *query);

bool feeds_twitter_parse (twitter_feed_t *feed, const char *data, int dataSize);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void feeds_weather_search (weather_feed_t *feed, const char *query);

bool feeds_weather_parse (weather_feed_t *feed, const char *data, int dataSize);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
