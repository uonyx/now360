//
//  cx_varmod.h
//
//  Created by Ubaka Onyechi on 24/11/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "cx_varmod.h"
#include "../system/cx_list.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef enum cx_varmod_var_type
{
  CX_VARMOD_VAR_TYPE_INVALID = -1,
  CX_VARMOD_VAR_TYPE_BOOL,
  CX_VARMOD_VAR_TYPE_INT,
  CX_VARMOD_VAR_TYPE_FLOAT,
  CX_VARMOD_VAR_TYPE_VEC4,
  NUM_CX_VARMOD_VAR_TYPES
} cx_varmod_var_type;


typedef struct cx_varmod_var
{
  const char *name;
  void *val;
  cx_varmod_var_type type;
} cx_varmod_var;

void cx_varmod_register_var (cx_varmod_var_type type, void *val, const char *name);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

static bool s_initialised = false;
static cx_varmod_settings s_settings;
static cx_list2 *s_variables = NULL;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

bool cx_varmod_init (cx_varmod_settings *settings)
{
  s_settings.renderFunc = settings->renderFunc;
  
  s_initialised = true;
  
  return s_initialised;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

bool cx_varmod_deinit (void)
{
  s_initialised = false;
  
  return !s_initialised;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void cx_varmod_register_bool (bool *val, const char *name)
{
  cx_varmod_register_var (CX_VARMOD_VAR_TYPE_BOOL, val, name);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void cx_varmod_register_float (cxf32 *val, const char *name, cxf32 min, cxf32 max)
{
  cx_varmod_register_var (CX_VARMOD_VAR_TYPE_FLOAT, val, name);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void cx_varmod_register_int (cxi32 *val, const char *name, cxi32 min, cxi32 max)
{
  cx_varmod_register_var (CX_VARMOD_VAR_TYPE_INT, val, name);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void cx_varmod_register_vec4 (cx_vec4 *val, const char *name, cxf32 min, cxf32 max)
{
  cx_varmod_register_var (CX_VARMOD_VAR_TYPE_VEC4, val, name);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void cx_varmod_register_var (cx_varmod_var_type type, void *val, const char *name)
{
  cx_varmod_var *var = (cx_varmod_var *) cx_malloc (sizeof (cx_varmod_var));
  
  var->type = type;
  var->val = val;
  var->name = name;
  
  // add to list
  s_variables = NULL;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

void cx_varmod_render (void)
{
}


////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
