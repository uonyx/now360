//
//  cx_mesh.h
//
//  Created by Ubaka Onyechi on 26/02/2012.
//  Copyright (c) 2012 uonyechi.com. All rights reserved.
//

#ifndef CX_MESH_H
#define CX_MESH_H

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "../system/cx_system.h"
#include "cx_shader.h"
#include "cx_material.h"
#include "cx_vertex_data.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#define CX_MESH_DEBUG_LOG         1

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#if CX_VERTEX_DATA_AOS
#define CX_VERTEX_BUFFER_COUNT    2
#else
#define CX_VERTEX_BUFFER_COUNT    4
#endif

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct cx_mesh
{
  cxu32 vbos [CX_VERTEX_BUFFER_COUNT];
  cxu32 vao;
  cx_vertex_data *vertexData;
  cx_shader *shader;
  cx_material *material;
  bool gpu;
} cx_mesh;

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

cx_mesh * cx_mesh_create (cx_vertex_data *vertexData, cx_shader *shader, cx_material *material);
void      cx_mesh_destroy (cx_mesh *mesh);
void      cx_mesh_render (cx_mesh *mesh);

////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////

#endif
